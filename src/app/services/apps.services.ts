import { Injectable } from "@angular/core";
import { Icon } from "../models/icon.model";
import { Software } from "../models/software.model";
import { Window } from "../models/window.model";

@Injectable({
    providedIn: 'root'
})

export class AppsService {

    icons: Array<Icon> = [
        new Icon('grid', '0.8 0.3 14.5 14.5', 'M3.805 3C3.268 3 3 3 3 3.625v.75C3 5 3.268 5 3.805 5h.39C4.732 5 5 5 5 4.375v-.75C5 3.022 4.732 3 4.195 3zm4 0C7.268 3 7 3 7 3.625v.75C7 5 7.268 5 7.805 5h.39C8.732 5 9 5 9 4.375v-.75C9 3.022 8.732 3 8.195 3zm4 0C11.268 3 11 3 11 3.625v.75c0 .625.268.625.805.625h.39C12.732 5 13 5 13 4.375v-.75c0-.603-.268-.625-.805-.625zm-8 4C3.268 7 3 7 3 7.625v.75C3 9 3.268 9 3.805 9h.39C4.732 9 5 9 5 8.375v-.75C5 7.022 4.732 7 4.195 7zm4 0C7.268 7 7 7 7 7.625v.75C7 9 7.268 9 7.805 9h.39C8.732 9 9 9 9 8.375v-.75C9 7.022 8.732 7 8.195 7zm4 0C11.268 7 11 7 11 7.625v.75c0 .625.268.625.805.625h.39C12.732 9 13 9 13 8.375v-.75c0-.603-.268-.625-.805-.625zm-8 4C3.268 11 3 11 3 11.625v.75c0 .625.268.625.805.625h.39C4.732 13 5 13 5 12.375v-.75c0-.603-.268-.625-.805-.625zm4 0C7.268 11 7 11 7 11.625v.75c0 .625.268.625.805.625h.39C8.732 13 9 13 9 12.375v-.75c0-.603-.268-.625-.805-.625zm4 0c-.537 0-.805 0-.805.625v.75c0 .625.268.625.805.625h.39c.537 0 .805 0 .805-.625v-.75c0-.603-.268-.625-.805-.625z', ''),
        new Icon('identity', '0 0 988 988', 'M928,109.5H60c-33.1,0-60,26.9-60,60v649c0,33.1,26.9,60,60,60h868c33.1,0,60-26.9,60-60v-649 C988,136.4,961.1,109.5,928,109.5z M470.5,671.7c0,24.399-85.8,44.2-192.5,44.7C171.3,715.9,85.5,696.1,85.5,671.7v-93.2 c0-32.5,26.3-58.8,58.8-58.8h62.3c14,0,18.9-11.9,16.2-24.101c-3.2-14.399-16.3-23.199-25.6-33.6c-22.5-25.3-39.7-55.3-39.7-90 c0-66.5,53.9-120.4,120.4-120.4c0.1,0,0.2,0,0.2,0c0.1,0,0.2,0,0.2,0c66.5,0,120.4,53.9,120.4,120.4c0,34.7-17.2,64.7-39.7,90 c-9.3,10.4-22.5,19.3-25.6,33.6C330.7,507.9,335.5,519.7,349.6,519.7H411.9c32.5,0,58.8,26.3,58.8,58.8v93.2H470.5z M859.4,642.5 h-264c-22.101,0-40-17.9-40-40s17.899-40,40-40h264c22.1,0,40,17.9,40,40S881.5,642.5,859.4,642.5z M859.4,405.5h-264 c-22.101,0-40-17.9-40-40s17.899-40,40-40h264c22.1,0,40,17.9,40,40S881.5,405.5,859.4,405.5z', ''),
        new Icon('browser', '0 0 980 980', `M836.5,143.6c-45-45-97.399-80.3-155.7-105C620.3,13,556.101,0,490,0c-66.1,0-130.3,13-190.8,38.5
                                            c-58.4,24.7-110.8,60-155.7,105c-45,45-80.3,97.4-105,155.7C12.9,359.7,0,423.8,0,490s13,130.3,38.5,190.8
                                            c24.7,58.4,60,110.801,105,155.7c45,45,97.4,80.3,155.7,105C359.7,967.101,423.8,980,490,980s130.3-13,190.8-38.5
                                            c58.4-24.7,110.801-60,155.7-105c45-45,80.3-97.399,105-155.7C967.101,620.3,980,556.2,980,490s-13-130.3-38.5-190.8
                                            C916.8,240.9,881.5,188.5,836.5,143.6z M898.101,450.101H763C760.2,388.8,750.8,329.9,735.4,276c29.7-9.2,57.2-20,82.3-32.4
                                            C861.9,302.2,890.601,373,898.101,450.101z M530,104.9c8.9,4.1,17.601,9.5,26.3,16.3c23.2,18.2,45.2,46,63.801,80.4
                                            c3,5.6,6,11.4,8.8,17.4c-31.7,5.4-65,9-99,10.6V104.9H530z M359.7,201.6c18.6-34.5,40.7-62.3,63.8-80.4
                                            c8.7-6.8,17.5-12.3,26.4-16.4v124.8C415.8,228,382.5,224.5,350.8,219C353.8,213.1,356.7,207.3,359.7,201.6z M313.4,329.3
                                            c2.7-11.7,5.6-23.1,8.8-34.2c41,7.9,83.8,12.7,127.8,14.6V450H297C299.101,408.4,304.601,367.9,313.4,329.3z M450,530.101v140.3
                                            c-43.8,1.8-86.399,6.7-127.3,14.5c-3.4-11.601-6.5-23.5-9.3-35.8c-8.7-38-14.101-77.9-16.3-119H450z M450,750.5v123.101
                                            c-8.899-4.101-17.7-9.5-26.399-16.4c-23.2-18.2-45.2-46-63.801-80.4c-2.8-5.1-5.5-10.399-8.1-15.8
                                            C383.101,755.601,416.2,752.101,450,750.5z M620.2,776.8c-18.6,34.5-40.7,62.301-63.8,80.4c-8.7,6.8-17.5,12.2-26.3,16.3v-123
                                            c33.8,1.601,66.8,5.101,98.199,10.4C625.601,766.3,623,771.601,620.2,776.8z M666.5,649.101c-2.8,12.3-5.899,24.199-9.3,35.8
                                            c-40.8-7.8-83.4-12.601-127.2-14.5v-140.3h152.8C680.7,571.101,675.2,611,666.5,649.101z M530,450.101V309.7
                                            c43.9-1.8,86.7-6.7,127.7-14.6c3.2,11.1,6.2,22.5,8.8,34.2c8.8,38.6,14.3,79,16.4,120.7H530V450.101z M760.5,181.9
                                            c-16.3,6.9-33.7,13.1-52,18.6c-5.6-12.8-11.5-25.1-17.899-36.9c-9-16.6-18.5-31.9-28.7-45.9C697.9,134.3,731,156,760.5,181.9z
                                            M318,117.8c-10.1,14-19.7,29.3-28.6,45.9c-6.4,11.8-12.3,24.1-17.9,36.9c-18.3-5.5-35.6-11.7-51.9-18.6
                                            C248.9,156.1,282,134.4,318,117.8z M162.3,243.6c25,12.4,52.5,23.2,82.2,32.3c-15.4,53.9-24.8,112.8-27.6,174.1h-135
                                            C89.4,373,118.2,302.2,162.3,243.6z M81.9,530.101H217c2.9,61.3,12.5,120.199,27.9,174c-29.9,9.199-57.5,20-82.7,32.5
                                            C118.2,677.9,89.4,607.101,81.9,530.101z M219.5,798.2c16.4-7,34-13.3,52.5-18.8c5.4,12.2,11.1,24,17.3,35.399
                                            c9.5,17.601,19.7,33.801,30.5,48.5C283.2,846.5,249.5,824.5,219.5,798.2z M660,863.3c10.9-14.699,21.101-30.899,30.601-48.5
                                            c6.1-11.3,11.899-23.199,17.3-35.399c18.6,5.6,36.2,11.899,52.6,18.899C730.5,824.5,696.7,846.5,660,863.3z M817.7,736.5
                                            c-25.2-12.399-52.8-23.3-82.8-32.5c15.5-53.8,25-112.7,27.899-173.899H898C890.601,607.101,861.9,677.9,817.7,736.5z`, ''),
        new Icon('files', '0 0 124 124', 'M118,25.5H62v-4c0-3.3-2.7-6-6-6H6c-3.3,0-6,2.7-6,6v10.2v6.5v64.3c0,3.3,2.7,6,6,6h111c3.8,0,7-3.2,7-7v-70 C124,28.2,121.3,25.5,118,25.5z', ''),
        new Icon('terminal', '0 0 122.3 122.3', 'M116.3,15.15H6c-3.3,0-6,2.7-6,6v80c0,3.3,2.7,6,6,6h110.3c3.3,0,6-2.7,6-6v-80C122.3,17.85,119.6,15.15,116.3,15.15z M42.6,57.75l-19.7,19.7c-1.7,1.7-4.2,2.3-6.3,1.4c-4.3-1.8-5-7-2.1-9.9l11.2-11.2c2.3-2.3,2.3-6.1,0-8.5l-11.3-11.2 c-2.9-2.9-2.2-8.1,2.1-9.9c2.2-0.9,4.7-0.3,6.3,1.4l19.7,19.7c1.2,1.2,1.8,2.7,1.8,4.2S43.8,56.55,42.6,57.75z M86.5,79.15h-36 c-3.3,0-6-2.7-6-6s2.7-6,6-6h36c3.3,0,6,2.7,6,6S89.8,79.15,86.5,79.15z', ''),
        new Icon('previous', '', 'M10 0c-.69.874-1.397 1.757-2.008 2.656-.679 1-1.287 1.972-1.825 2.912C5.67 6.436 5.297 7.342 5 8c.297.658.67 1.564 1.167 2.432a45.19 45.19 0 0 0 1.825 2.912c.61.9 1.317 1.782 2.008 2.656v-1.49c-.4-.524-.837-1.062-1.222-1.625a32.845 32.845 0 0 1-1.37-2.18 39.196 39.196 0 0 1-1.285-2.5v-.001L6.027 8l.096-.203c.334-.71.852-1.747 1.285-2.501a33.18 33.18 0 0 1 1.37-2.181c.385-.562.822-1.1 1.222-1.625V0z', ''),
        new Icon('next', '0 0 16 16', 'M6 0c.69.874 1.397 1.757 2.008 2.656.679 1 1.287 1.972 1.825 2.912.497.868.87 1.774 1.167 2.432-.297.658-.67 1.564-1.167 2.432a44.816 44.816 0 0 1-1.825 2.912c-.61.9-1.317 1.782-2.008 2.656v-1.49c.4-.524.837-1.062 1.222-1.625.486-.71.942-1.437 1.37-2.18.433-.755.95-1.792 1.285-2.5v-.001L9.973 8l-.096-.203a39.108 39.108 0 0 0-1.285-2.501 32.873 32.873 0 0 0-1.37-2.181C6.837 2.553 6.4 2.015 6 1.49V0z', ''),
        new Icon('dropdown', '0 0 16 16', 'm13 6-5 5-5-5z', ''),
        new Icon('search', '0 0 16 16', 'M7 1C3.69 1 1 3.69 1 7s2.69 6 6 6a5.948 5.948 0 0 0 3.664-1.273l2.863 2.863 1.063-1.063-2.863-2.863A5.949 5.949 0 0 0 13 7c0-3.31-2.69-6-6-6zm0 1a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5z', ''),
        new Icon('list', '0 0 16 16', 'M2 2v3h3V2zm1 1h1v1H3zm3 0v1h8V3zM2 6v3h3V6zm1 1h1v1H3zm3 0v1h8V7zm-4 3v3h3v-3zm1 1h1v1H3zm3 0v1h8v-1z', ''),
        new Icon('menu', '0 0 16 16', 'M3 3v1h10V3zm0 4v1h10V7zm0 4v1h10v-1z', ''),
        new Icon('home', '0 0 16 16', 'M14 5V3h-2.002z M2 7v8h9v-1H3V6.333zm11.002-1L13 15h1V7z M8 8.986a8.47 8.47 0 0 1 .607-.122 5.24 5.24 0 0 1 .872-.064c.295 0 .54.043.735.129.195.08.35.197.465.35.119.147.202.326.25.535.047.21.071.44.071.693V14.2H8z M8 .293L.146 8.146l.708.708L8 1.707l7.146 7.147.708-.708z', ''),
        new Icon('trash', '0 0 16 16', 'M7.5 0C6.4 0 5.355.32 5.355.32L5 .428v1.683A13.88 13.88 0 0 0 2.002 3L2 4H1v1h1l.004 9c0 .439.04.788.15 1.082.111.294.311.528.563.668.503.28 1.12.25 1.953.25h5.664c.833 0 1.45.03 1.953-.25.252-.14.45-.374.56-.668.11-.294.153-.643.153-1.082l-.002-8h-1L12 14c0 .376-.04.603-.088.729-.034.09-.078.129-.11.146-.173.097-.611.125-1.468.125H4.67c-.857 0-1.295-.028-1.469-.125a.267.267 0 0 1-.113-.146v-.002c-.046-.122-.084-.348-.084-.727v-.002L3 5h11V4h-1.002L13 3a13.855 13.855 0 0 0-3-.889V.45L9.67.331S8.757.001 7.5.001zm0 1c.89 0 1.29.155 1.5.22v.739a14.05 14.05 0 0 0-1.498-.084c-.502 0-1.003.032-1.502.086v-.734C6.266 1.157 6.772 1 7.5 1zM5 6v6h1V6zm2 0v6h1V6zm2 0v6h1V6z', ''),
        new Icon('desktop', '0 0 16 16', 'm 355.99414,62 c -1.25819,0.0145 -2.17883,-0.0306 -2.93164,0.384766 -0.37641,0.20768 -0.67518,0.559426 -0.83984,0.998046 C 352.05801,63.821442 352,64.34241 352,65 v 7 c 0,0.65759 0.058,1.178558 0.22266,1.617188 0.16466,0.43862 0.46343,0.790366 0.83984,0.998046 0.75281,0.41535 1.67345,0.370226 2.93164,0.384766 h 0.004 8.0039 0.004 c 1.25819,-0.0145 2.17883,0.0306 2.93164,-0.384766 0.37641,-0.20768 0.67324,-0.559426 0.83789,-0.998046 C 367.93972,73.178558 368,72.65759 368,72 v -7 c 0,-0.65759 -0.06,-1.178558 -0.22461,-1.617188 -0.16465,-0.43862 -0.46148,-0.790366 -0.83789,-0.998046 C 366.18469,61.969406 365.26405,62.01454 364.00586,62 h -0.004 -8.00586 z M 356,63 h 8 c 1.25957,0.0147 2.08706,0.0578 2.45312,0.259766 0.1834,0.10118 0.28915,0.214649 0.38672,0.474609 C 366.9373,63.994315 367,64.40759 367,65 v 7 c 0,0.59241 -0.0626,1.005675 -0.16016,1.265625 -0.0976,0.25995 -0.20334,0.373429 -0.38672,0.474609 C 366.08705,73.942214 365.25957,73.98531 364,74 H 363.994 356 Z', 'translate(-352,-60)')
    ];

    softwares: Array<Software> = [
        new Software('identity', this.icons[1] , false, true, 0, false, true, true),
        new Software('browser', this.icons[2], true, true, 0, false, false, false),
        new Software('files', this.icons[3], true, true, 1, false, true, false),
        new Software('terminal', this.icons[4], true, true, 2, false, true, false),
    ];

    explorer: Array<any> = [
        [
            'recent', 
            'files', 
            this.icons[11],
            false,
            []
        ],
        [
            'starred', 
            'files', 
            this.icons[11],
            false,
            []
        ],
        [
            'home', 
            'files', 
            this.icons[11],
            false,
            [
                [
                    'desktop', 
                    'files', 
                    this.icons[11],
                    false,
                    [
                        [
                            'home', 
                            'files', 
                            this.icons[11],
                            false, 
                            []
                        ],
                        [
                            'trash', 
                            'files', 
                            this.icons[12],
                            false,
                            []
                        ],
                    ]
                ],
                [
                    'documents', 
                    'files', 
                    this.icons[11],
                    false,
                    []
                ],
                [
                    'music', 
                    'files', 
                    this.icons[11],
                    false,
                    []
                ],
                [
                    'pictures', 
                    'files', 
                    this.icons[11],
                    false,
                    []
                ],
                [
                    'videos', 
                    'files', 
                    this.icons[11],
                    false,
                    []
                ],
            ]
        ],
        [
            'trash', 
            'files', 
            this.icons[11],
            false,
            []
        ],
        [
            'other_locations', 
            'files', 
            this.icons[11],
            false,
            []
        ]
    ]

    getIconByName(iconName: string): Icon {
        const icon = this.icons.find(x => x.title === iconName);
        if(!icon) {
            throw new Error('Icon not found!');
        } else {
            return icon;
        }
    }

    getAllSoftwares(): Array<Software> {
        return this.softwares;
    }

    getSoftwareByType(softwareType: string): Software {
        const software = this.softwares.find(software => software.type === softwareType);
        if(!software) {
            throw new Error('Software not found!');
        } else {
            return software;
        }
    }

    getAllWindows() {
        let windows = [];

        for (const software of this.softwares) {
            if(software.windows.length > 0) {
                for (const window of software.windows) {
                    windows.push(window);
                }
            }
        }
        return windows;
    }

    unfocusAllWindows(): void {
        for (const window of this.getAllWindows()) {
            window.focused = false;
        }
    }

    unfocusAllSoftwares(): void {
        for(const software of this.getAllSoftwares()) {
            software.focused = false;
        }
    }

    getFocusedSoftware(): Software | null {
        const focusedSoftware =  this.softwares.find(x => x.focused === true);
        if(focusedSoftware !== undefined)
        {
            return focusedSoftware;
        }
        else
        {
            return null;
        }
    }

}